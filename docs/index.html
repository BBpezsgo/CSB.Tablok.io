<!DOCTYPE html>
<html lang="hu">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/slider.css">
    <link rel="stylesheet" href="styles/header.css">
    <link rel="stylesheet" href="styles/sidebar.css">
    <link rel="stylesheet" href="styles/navbar.css">
    <link rel="stylesheet" href="styles/form.css">
    <link rel="stylesheet" href="styles/scrollbar.css">
    <link rel="icon" type="image/x-icon" href="https://www.nemesgszi.hu/components/images/favicon.png">
    <title>Tablók | Békéscsabai SZC Nemes Tihamér Technikum és Kollégium | GSZI |</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://kit.fontawesome.com/d70969805a.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700&subset=latin,latin-ext" rel="stylesheet" type="screen">
</head>

<body>

    <div class="header" style="z-index: -1;">
        <div class="headerfade" style="z-index: -1;"></div>
        <div>
            <h1 id="TitleText">Békéscsabai SZC Nemes Tihamér Technikum és Kollégium<span>Tablók</span></h1>            
        </div>
    </div>
    <div class="header-btns">
        <button class="header-btn" style="background-image: url(img/info.svg)"     id="header-btn-creators" onclick="document.getElementById('id01').style.display='block'"></button>
        <button class="header-btn" style="background-image: url(img/feedback.svg)" id="header-btn-creators" onclick="document.getElementById('id01').style.display='block'"></button>
    </div>

    <div class="navbar">
        <a style="float: right;" onclick="document.getElementById('sidebar').classList.toggle('sideHidden')"
            class="mobileMenuToggleButton">
            <i class="fa fa-bars"></i>
        </a>
    </div>

    <div class="row">
        <div id="sidebar" class="side sideHidden">
            <div class="sidebarMainClose">
                <div class="sidebarMainCloseButton"
                    onclick="document.getElementById('sidebar').classList.toggle('sideHidden')">
                    <img src="img/x1.png">
                </div>
            </div>
            <div id="sidebarButtons" class="sidebarButtons">
                
            </div>
        </div>

        <div class="main">
            <div id="tablos">
                
            </div>
        </div>
    </div>


    <!-- Form Creators -->
    <div id="id01" class="modal">
        <div class="modal-content animate">
            <div class="imgcontainer">
                <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Bezár"></span>
            </div>

            <div class="container" style="font-size: 20px;">
                <h3>Készítők <span style="opacity: .5;">(11.C)</span></h3>
                <ul>
                    <li>Csökmei Péter</li>
                    <li>Bánszky Balázs</li>
                </ul>
                <p style="font-size: .9em; opacity: .7;">
                    11-ben csináltuk
                </p>
                <!-- Icons by <a target="_blank" href="https://icons8.com">Icons8</a> -->
            </div>
        </div>
    </div>

    <!-- Form Feedback -->
    <div id="id02" class="modal">
        <div class="modal-content animate">
            <div class="imgcontainer">
                <span onclick="FeedbackGoBack(); document.getElementById('id02').style.display='none'" class="close"
                    title="Bezár"></span>
            </div>

            <div class="container" style="font-size: 20px;">
                <div id="feedback-upload-form">
                    <h3>Visszajelzés küldése</h3>
                    <p>
                        Ha valami hibát tapasztal, vagy új funkciót ajánlana, itt megteheti!
                    </p>
                    <form onsubmit="Feedback(); return false" method="post">
                        <div class="mb-3 mt-3">
                            <textarea required maxlength="1024" id="feedback-form-desc" name="desc"
                                placeholder="Visszajelzés szövege"></textarea>
                        </div>
                        <input class="btn btn-primary" type="submit" value="Feltölt">
                    </form>
                </div>
                <div id="feedback-upload-done" style="display: none;">
                    <i class="fas fa-check-circle" style="font-size: 32px; display: inline; color: #0eb833;"></i>
                    <h2 style="display: inline;">Köszönjük a visszajelzést!</h2>
                    <div id="feedback-upload-spinner">
                        <img width="32" height="32" src="img/spinner.gif" style="display: inline-block;">
                        Feltöltés...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Anti select -->
    <p style="position:absolute; top: 0;">
        <script type="text/javascript">
            var omitformtags = ["input", "textarea", "select"]
            omitformtags = omitformtags.join("|")
            function disableselect(e) {
                if (omitformtags.indexOf(e.target.tagName.toLowerCase()) == -1)
                { return false }
            }
            function reEnable() { return true }
            if (typeof document.onselectstart != "undefined")
            { document.onselectstart = new Function("return false") }
            else {
                document.onmousedown = disableselect
                document.onmouseup = reEnable
            }
        </script>
        <script type="text/javascript">
            try {
                var pageTracker = _gat._getTracker("UA-549331-28")
                pageTracker._trackPageview();
            } catch (err) { }
        </script>
    </p>

    <script>
        function Feedback() {
            const title = 'Visszajelzés'
            const desc = document.getElementById('feedback-form-desc').value
            const spinner = document.getElementById('feedback-upload-spinner')

            var xhr = new XMLHttpRequest()
            xhr.onreadystatechange = function () {
                const state = {
                    0: 'UNSENT',
                    1: 'OPENED',
                    2: 'HEADERS_RECEIVED',
                    3: 'LOADING',
                    4: 'DONE'
                }
                stateElement.innerText = 'readyState:' + state[xhr.readyState] + ' statusText: ' + xhr.statusText + ' status: ' + xhr.status
                if (xhr.readyState == 4) {
                    spinner.style.display = 'none'
                } else {
                    spinner.style.display = 'block'
                }
            }
            xhr.open("POST", 'https://api.trello.com/1/cards/?idList=631c1b304028e8138251b52e&token=84de6f5cbc9e3fb5df77596358352cc839e1dea58d8dbb0857919f39b6143acf&key=16160910964e82904e57646c84c9fb69&name=' + title + '&desc=' + desc, true)
            xhr.setRequestHeader('Content-Type', 'application/json')
            xhr.send()
        }

        const form = document.querySelector('form')
        const thankYouMessage = document.getElementById("feedback-upload-done")
        const formBody = document.getElementById("feedback-upload-form")
        form.addEventListener('submit', (e) => {
            e.preventDefault()
            thankYouMessage.style.display = "block"
            formBody.style.display = "none"
        })

        function FeedbackGoBack() {
            thankYouMessage.style.display = "none"
            formBody.style.display = "block"
            document.getElementById('feedback-form-desc').value = ''
        }
    </script>

    <script>
        const modals = [
            document.getElementById('id01')
        ]

        window.onclick = function (event) {
            modals.forEach(modal => {
                if (event.target == modal)
                { modal.style.display = "none" }
            })
        }
    </script>

    <script type="text/javascript">
        function ShowForm(title, context) {
            document.getElementById('CustomFormTitle').textContent = title
            document.getElementById('CustomFormContext').textContent = context
            document.getElementById('id02').style.display = 'block'
        }
    </script>

    <script>var exports={};</script>
    <script src="./index.js" type="module"></script>
</body>

</html>